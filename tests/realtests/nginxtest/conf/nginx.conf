worker_processes 1;

events{}
http
{
	server {
		listen 80;
		server_name noe.42.fr;
		root /var/www/html;
		index index.html index.htm index.php index.nginx-debian.html;
		location / {
			try_files $uri $uri/ /index.php?q=$uri&$args;
		}
	}

	server {

		##########
		## BASE ##
		##########

		listen 443 ssl http2;
		server_name noe.42.fr;
		index index.html index.htm index.php;
		root /var/www/html;

		#########
		## SSL ##
		#########

		ssl_protocols TLSv1.2 TLSv1.3;
		ssl_prefer_server_ciphers on;
		ssl_ciphers ECDH+AESGCM:ECDH+AES256:ECDH+AES128:DH+3DES:!ADH:!AECDH:!MD5;
		# path to certificates : (Il faudra voir au niveau des droit lequel est le mieux
		# on peut changer ce path dans le dockerfile)

		# ssl_certificate      /etc/nginx/server.crt;
		# ssl_certificate_key  /etc/nginx/server.key;
		
		# ssl_certificate     /usr/local/nginx/conf/cert.pem;
        # ssl_certificate_key /usr/local/nginx/conf/cert.key;
		
		ssl_certificate /etc/ssl/certs/nginx-selfsigned.crt;
		ssl_certificate_key /etc/ssl/private/nginx-selfsigned.key;
	
		location / {
			try_files $uri $uri/ /index.php?q=$uri&$args;
		}
	}
}
